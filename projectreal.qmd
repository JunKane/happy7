---
title: "7ì¡° í–‰ë³µì„ ì°¾ì•„ì„œ!"
code-overflow: scroll  # ì½”ë“œ ê¸¸ì–´ì§ˆ ê²½ìš° ìŠ¤í¬ë¡¤ í—ˆìš©
title-slide-attributes: 
  data-background-image: 1.jpg
  data-background-size: cover
  data-background-opacity: "0.5"  # ë°°ê²½ íˆ¬ëª…ë„ ì¡°ì ˆ
  data-font-size: 48px  # ğŸ”¥ ê¸°ë³¸ ê¸€ì í¬ê¸° ì¡°ì ˆ (ì œëª©, ë¶€ì œëª©, ì €ì í¬í•¨)
  
author: "Team 7: ê¶Œì„œì—°, ê¹€ê·œì§„, ê¹€ì˜ˆì›, ì–‘í˜„ì¤€, ì´ì¬ìš°"
subtitle: "í–‰ë³µì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì§€í‘œ"
format:
  revealjs:
    theme: simple  # ë˜ëŠ” white, night
    slide-number: true
    chalkboard: false
    code-overflow: scroll
    font-family: "Inter, Helvetica, sans-serif"
execute:
  echo: true  # ê¸°ë³¸ì ìœ¼ë¡œ ì½”ë“œì™€ ê²°ê³¼ ëª¨ë‘ í‘œì‹œ
  warning: false  # (ì„ íƒ) ê²½ê³  ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
css: styles.css  # ğŸ”¥ CSS íŒŒì¼ ì ìš©
---

```{python}
#| echo : false 
import pandas as pd
import numpy as np
import seaborn as sns
import matplotlib.pyplot as plt

```

# ğŸ—’ï¸ ëª©ì°¨

::: text-center
<br> <span class="section-title">1. ì£¼ì œ ì„ ì • ì´ìœ 

<span class="section-title">2. ë°ì´í„° ì¤€ë¹„ ë° ì „ì²˜ë¦¬

<span class="section-title">3. ë°ì´í„° ë¶„ì„ ë° ì‹œê°í™”

<span class="section-title">4. ê²°ë¡  ë° ê°œì„  ë°©ì•ˆ
:::

# 1. ì£¼ì œ ì„ ì • ì´ìœ 

## 1-1 ì„¸ê³„ í–‰ë³µ ë³´ê³ ì„œ <br> (World Happiness Report)
::: {.columns}

::: {.column width="70%"}

| ì˜ì–´                           | í•œê¸€                         |
|-------------------------------|------------------------------|
| GDP per Capita                | 1ì¸ë‹¹ êµ­ë‚´ì´ìƒì‚° (GDP)       |
| Social Support (Family)       | ì‚¬íšŒì  ì§€ì› (ê°€ì¡± ë“±)        |
| Healthy Life Expectancy       | ê±´ê°• ê¸°ëŒ€ ìˆ˜ëª…               |
| Freedom to Make Life Choices  | ì‚¶ì˜ ì„ íƒ ììœ                |
| Generosity                    | ê´€ëŒ€í•¨(ê¸°ë¶€ì—¬ë¶€)             |
| Perceptions of Corruption     | ë¶€íŒ¨ ì¸ì‹ (ì •ë¶€ ì‹ ë¢°ë„)      |

:::

::: {.column width="30%"}
<br>

### ìš°ë¦¬ë‚˜ë¼ ìˆœìœ„  
- 158ê°œêµ­ ì¤‘  

::: {.incremental}
- 47ìœ„!
:::

ìë£Œ ì¶œì²˜: [world-happiness](https://www.kaggle.com/datasets/unsdsn/world-happiness)

:::

:::


# 2. ë°ì´í„° ì¤€ë¹„ ë° ì „ì²˜ë¦¬

## 2-1 ë°ì´í„° ì •ë³´

#### ì„œìš¸ ì„œë² ì´(2024, êµ¬ ë„ì‹œì •ì±…ì§€í‘œì¡°ì‚¬)

![](./image1.png) ![](./image2.png)

-   ì‚¬íšŒ ì§€í‘œ (ì¸êµ¬ì™€ ê°€êµ¬, ê²½ì œì™€ ë…¸ë™, ë„ì‹œìƒí™œê³¼ ì£¼ê±°, ê±´ê°•ê³¼ ë³´ê±´ ë“±)
-   BSCì§€í‘œ (ë³´ìœ¡, ë¬¸í™”í™˜ê²½, êµí†µ, ë³´í–‰ ë§Œì¡±ë„ ë“±)
-   í‘œë³¸ í¬ê¸° : 20,000ê°€êµ¬(ë§Œ 15ì„¸ ì´ìƒ ê°€êµ¬ì› 36,280ëª…)


------------------------------------------------------------------------

## 2-2 ë°ì´í„° ì¶”ì¶œ
::: {.columns}
::: {.column width="60%"}
<!-- ::: {.column width="60%" style="margin-top:20px;"} -->
```{python}
#| code-fold: true
#| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
import numpy as np
import pandas as pd
dat = pd.read_csv("./happiness_raw.csv",encoding='euc-kr')

dat.info()
```
:::

::: {.column width="40%"}
<br>

### ì£¼ìš” ë°ì´í„°
- ì´ 279ê°œ ë¬¸í•­ ì¤‘ í–‰ë³µì— ì˜í–¥ì„ 
<br>ì¤„ ê²ƒ ê°™ì€ ë³€ìˆ˜ 23ê°œ ì¶”ì¶œ!
:::
:::

---

## 2-3 í–‰ë³µì§€ìˆ˜ / í–‰ë³µì—¬ë¶€ ì¹¼ëŸ¼ ìƒì„±
- í–‰ë³µ ê´€ë ¨ 5ê°œ ë¬¸í•­ í‰ê· ë‚´ì–´ **í–‰ë³µì§€ìˆ˜** ì¹¼ëŸ¼ ìƒì„±
```{python}
#| echo : true
import numpy as np
import pandas as pd
from scipy.stats import t

import matplotlib.pyplot as plt
import seaborn as sns

dat1 = pd.read_csv('./happiness_raw.csv', encoding='euc-kr')
dat1['í–‰ë³µì§€ìˆ˜'] = dat1[['í–‰ë³µì§€ìˆ˜_ìì‹ ì˜ ê±´ê°•ìƒíƒœ','í–‰ë³µì§€ìˆ˜_ìì‹ ì˜ ì¬ì •ìƒíƒœ','í–‰ë³µì§€ìˆ˜_ì£¼ìœ„ ì¹œì§€, ì¹œêµ¬ì™€ì˜ ê´€ê³„',
                   'í–‰ë³µì§€ìˆ˜_ì£¼ìœ„ ì¹œì§€, ì¹œêµ¬ì™€ì˜ ê´€ê³„','í–‰ë³µì§€ìˆ˜_ê°€ì •ìƒí™œ','í–‰ë³µì§€ìˆ˜_ì‚¬íšŒìƒí™œ']].mean(axis=1)
sum(dat1['í–‰ë³µì§€ìˆ˜'].isna())

```

---

### í–‰ë³µì§€ìˆ˜ ë¶„í¬ í™•ì¸í•˜ê¸°
```{python}
plt.figure(figsize = (10, 3))
plt.hist(x=dat1['í–‰ë³µì§€ìˆ˜'], bins=50, edgecolor='black')
plt.show()
```

::: {.callout-note appearance="simple"}
-   ì¤‘ì•™ì— ë¾°ì¡±í•œ ë´‰ìš°ë¦¬ê°€ ì¡´ì¬, ì „ë°˜ì ìœ¼ë¡œ ì™¼ìª½ìœ¼ë¡œ ê¼¬ë¦¬ê°€ ê¸´ ë¹„ëŒ€ì¹­ ë¶„í¬
- íŠ¹íˆ 6ì  ë¶€ê·¼ì— ê°’ì´ ì§‘ì¤‘ì ìœ¼ë¡œ ëª°ë¦¼
- ì™œ? ğŸ¤” **ì¤‘ë¦½ê°’ ì„ í˜¸ í˜„ìƒ** â†’ í‰ê· ê°’, ì¤‘ë¦½ê°’ì„ ì„ íƒí•˜ê³ ì í•˜ëŠ” ê²½í–¥ ë•Œë¬¸ì¼ ê°€ëŠ¥ì„±ì´ ë†’ìŒ
![](./central_tendency_bias.png)
:::

<br>
<br>
<br>
---

### í–‰ë³µì§€ìˆ˜ êµ¬ê°„í™”í•˜ì—¬ `í–‰ë³µì—¬ë¶€` ì¹¼ëŸ¼ ìƒì„±í•˜ê¸°
```{python}
#| echo : true
#| fig-align: center
#| results: hide

def change(x):
    if x<4.2:
        return 'ë¶ˆí–‰'
    elif x>8:
        return 'í–‰ë³µ'
    else:
        return np.nan
dat1['í–‰ë³µì—¬ë¶€'] = dat1['í–‰ë³µì§€ìˆ˜'].apply(change)

```
- `í–‰ë³µì§€ìˆ˜`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬ê°„í™”í•˜ì—¬ `í–‰ë³µì—¬ë¶€` ì¹¼ëŸ¼ ìƒì„±
- 6ì  ë¶€ê·¼ì€ ë¬´ë‚œí•œ ì„ íƒì¼ ê°€ëŠ¥ì„±ì´ ìˆì–´ í•´ì„ì´ ì• ë§¤í•¨.
- ê·¸ë¦¬ê³ , ìš°ë¦¬ì˜ ë¶„ì„ ëª©ì ì€ **â€œë¬´ì—‡ì´ ì‚¬ëŒì„ í–‰ë³µí•˜ê²Œ ë§Œë“œëŠ”ê°€?â€**ì— ìˆìœ¼ë¯€ë¡œ
- ì¤‘ë¦½ê°’ ì œì™¸, **í–‰ë³µ** vs. **ë¶ˆí–‰** êµ¬ê°„ìœ¼ë¡œ ë‹¨ìˆœí™”


::: {.callout-note appearance="simple"}
-   ì™œ 4.2ì™€ 8ì„ ì„ íƒí–ˆëŠ”ê°€? ğŸ¤”

:::

---

## 2-4 ë°ì´í„° ë²”ì£¼í™”


::: {.column width="60%"}
![](./value_change.png)
:::

::: {.column width="40%"}
- ë¶„ì„ ìš©ì´ì„±ì„ ìœ„í•´ ì„¤ë¬¸ ë¬¸í•­ì˜ 
<br>
  ë³´ê¸°ë¥¼ 3~4ê°œ ê·¸ë£¹ìœ¼ë¡œ ì¬ë²”ì£¼í™”

#### ì˜ˆì‹œ
- 1~5ì  ì²™ë„: ë‚®ìŒ(1-2), ë³´í†µ(3), ë†’ìŒ(4-5)
<br>
- ì†Œë“ ìˆ˜ì¤€: í•˜, ì¤‘, ìƒ, ìµœìƒ
:::



---

## 2-5 ë°ì´í„° ê²°ì¸¡ì¹˜ ì œê±°

::: {.columns}

::: {.column width="60%"}

#### í–‰ë³µì§€ìˆ˜ ê²°ì¸¡ì¹˜ í™•ì¸
```{python}

sum(dat1['í–‰ë³µì§€ìˆ˜'].isna())

```


#### ë³€ìˆ˜ë³„ ê²°ì¸¡ì¹˜ í™•ì¸
```{python}

dat1.isna().sum().sort_values(ascending=False)

```

:::

::: {.column width="40%"}

::: {.callout-note appearance="simple"}
- `í–‰ë³µì§€ìˆ˜`ì—ëŠ” ê²°ì¸¡ì¹˜ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ
- ê·¸ëŸ¬ë‚˜ ë³€ìˆ˜ì— ë”°ë¼ ê²°ì¸¡ì¹˜ê°€ ì¡´ì¬í•¨
- ì˜ˆ: `ì§ì—… ë§Œì¡±ë„`, `ì›” í‰ê·  ê·¼ë¡œì†Œë“`ì˜ ê²½ìš°,
<br> ë¹„í•´ë‹¹ ì‘ë‹µì(ë¬´ì§ ë“±)ë¡œ ì¸í•´ ê²°ì¸¡ì¹˜ê°€ ë°œìƒí•¨
:::

- ê° ë³€ìˆ˜ì™€ í–‰ë³µì§€ìˆ˜ ê°„ì˜ ê´€ê³„ë¥¼ í™•ì¸í•˜ëŠ” ë¶„ì„ì´ë¯€ë¡œ,
- ì „ì²´ ë°ì´í„°ë¥¼ ì¼ê´„ì ìœ¼ë¡œ dropna() í•˜ê¸°ë³´ë‹¤ëŠ”,
- ë³€ìˆ˜ë³„ë¡œ ê²°ì¸¡ ì—¬ë¶€ë¥¼ í™•ì¸í•œ í›„, í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì„ íƒì ìœ¼ë¡œ dropna()ë¥¼ ì ìš©í•¨

:::

:::::

```{python}
#| echo: false
import numpy as np
import pandas as pd
from scipy.stats import t
import matplotlib.pyplot as plt
import seaborn as sns
from scipy.stats import chi2_contingency
from statsmodels.stats.proportion import proportion_confint
from statsmodels.graphics.mosaicplot import mosaic
from statsmodels.stats.multicomp import pairwise_tukeyhsd
plt.rcParams['font.family'] = 'Malgun Gothic'


# --------------------------------------------------------------
# ê³µí†µì‚¬ìš©í•¨ìˆ˜
def group_5to3(x):
    if x in [1, 2]:
        return 'ë‚®ìŒ(1-2)'
    elif x == 3:
        return 'ë³´í†µ(3)'
    elif x in [4, 5]:
        return 'ë†’ìŒ(4-5)'
    else:
        return np.nan

def labelizer(key):
    return f"{key[0]}\n{key[1]}"

def chi_print(table):
    chi2, p, dof, expected = chi2_contingency(table, correction=False)
    print(f"ì¹´ì´ì œê³± í†µê³„ëŸ‰: {chi2:.3f}, p-value: {p:.3f}")
    return

def visual_code(data):
    data['Proportion'] = data['í–‰ë³µ'] / data['ì „ì²´']

    # ì‹ ë¢°êµ¬ê°„ ê³„ì‚° (normal method ì‚¬ìš©)
    confints = [proportion_confint(count, total, alpha=0.05, method='normal') 
                for count, total in zip(data['í–‰ë³µ'], data['ì „ì²´'])]

    # ì•„ë˜ëŠ” ë°˜ë³µ
    data['CI_lower'] = [ci[0] for ci in confints]
    data['CI_upper'] = [ci[1] for ci in confints]

    # ì—ëŸ¬ë°” ê³„ì‚° (ìœ„ìª½ ì•„ë˜ìª½ ê¸¸ì´)
    data['yerr_lower'] = data['Proportion'] - data['CI_lower']
    data['yerr_upper'] = data['CI_upper'] - data['Proportion']

    # ë°” í”Œë¡¯ + ì—ëŸ¬ë°” ê·¸ë¦¬ê¸°
    plt.figure(figsize=(8, 6))
    plt.bar(data['Group'], data['Proportion'], yerr=[data['yerr_lower'], data['yerr_upper']], 
            capsize=5, color='skyblue', edgecolor='black')

    plt.ylim(0, 1)
    plt.ylabel('Estimated Proportion (with 95% CI)')
    plt.title('ëª¨ë¹„ìœ¨ ì¶”ì • ë° 95% ì‹ ë¢°êµ¬ê°„')
    plt.grid(axis='y', linestyle='--', alpha=0.7)
    plt.show()

```

# 3. ë°ì´í„° ë¶„ì„ ë° ì‹œê°í™”


## 3-1 í‘œë³¸í‰ê· ìœ¼ë¡œ ëª¨í‰ê·  ì‹ ë¢°êµ¬ê°„ ì¶”ì • 

```{python}
#| code-fold: true
#| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
# í–‰ë³µì§€ìˆ˜ ëª¨í‰ê·  ì¶”ì •
n = len(dat1['í–‰ë³µì§€ìˆ˜'])
mean = np.mean(dat1['í–‰ë³µì§€ìˆ˜'])
std = np.std(dat1['í–‰ë³µì§€ìˆ˜'], ddof=1)

# ì‹ ë¢°ìˆ˜ì¤€ ì„¤ì • (95%)
confidence = 0.95
alpha = 1 - confidence
a = n - 1  # ììœ ë„
# t-ì„ê³„ê°’
t_critical = t.ppf(1 - alpha/2, a)

# ì‹ ë¢°êµ¬ê°„ ê³„ì‚°
margin_of_error = t_critical * (std / np.sqrt(n))
ci_lower = mean - margin_of_error
ci_upper = mean + margin_of_error
```

```{python}
#| echo : false
print(f"ì‹ ë¢°êµ¬ê°„: {ci_lower.round(2)} - {ci_upper.round(2)}")
```
::: {.callout-note appearance="caution"}  
- 95% ì‹ ë¢°êµ¬ê°„ì„ ì´ìš©í•œ ëª¨í‰ê· ì˜ ì‹ ë¢°êµ¬ê°„ì„ ì•Œ ìˆ˜ ìˆìŒ.
- ë°ì´í„° ê°œìˆ˜ ë˜í•œ 36280ê°œë¡œ ì¶©ë¶„íˆ ë§ê¸° ë•Œë¬¸ì— í‘œë³¸ í‰ê· ì„ ëª¨í‰ê· ì´ë¼ê³  ì¶”ì •í•  ìˆ˜ ìˆìŒ.
:::
```{python}
#| fig-width: 6
#| fig-height: 2
#| code-fold: true
#| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
x = np.linspace(mean - 0.03 , mean + 0.03, 500)
y = t.pdf((x - mean) / (std / np.sqrt(n)), a)  # t ë¶„í¬ PDF

plt.figure(figsize=(10, 3))
plt.plot(x, y, label='t-ë¶„í¬', color='gray')

# í‰ê·  (ë¹¨ê°„ì„ )
plt.axvline(mean, color='red', linestyle='--', label=f'í‘œë³¸ í‰ê·  ({mean:.2f})')

# ì‹ ë¢°êµ¬ê°„ (íŒŒë€ì„ )
plt.axvline(ci_lower, color='blue', linestyle=':', label=f'ì‹ ë¢°êµ¬ê°„ í•˜í•œ ({ci_lower:.2f})')
plt.axvline(ci_upper, color='blue', linestyle=':', label=f'ì‹ ë¢°êµ¬ê°„ ìƒí•œ ({ci_upper:.2f})')

plt.title('í–‰ë³µì§€ìˆ˜ ëª¨í‰ê·  ì‹ ë¢°êµ¬ê°„')
plt.xlabel('í–‰ë³µì§€ìˆ˜')
plt.ylabel('í™•ë¥  ë°€ë„')
plt.legend()
plt.grid(True)
plt.tight_layout()
plt.show()
```


:::  

## 3-2 ë³€ìˆ˜ ë³„ ë¶„ì„â‘ _í–‰ë³µì§€ìˆ˜ì™€ ê°€ì¡±ê³¼ì˜ ì‹ì‚¬
### ëª¨ìì´í¬ ì‹œê°í™”, ì¹´ì´ì œê³± ê²€ì •
::::: columns

::: {.column width="60%"}
```{python}
#| code-fold: true
#| #| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
dat23 = dat1[['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬', 'í–‰ë³µì—¬ë¶€']].dropna()
dat23['G_ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'] = dat23['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'].apply(group_5to3)

order = ['ë‚®ìŒ(1-2)', 'ë³´í†µ(3)', 'ë†’ìŒ(4-5)']
dat23['G_ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'] = pd.Categorical(dat23['G_ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'], categories=order, ordered=True)
table = pd.crosstab(dat23['G_ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'], dat23['í–‰ë³µì—¬ë¶€'])

visual_table1 = table

# ëª¨ìì´í¬ ì‹œê°í™” ì½”ë“œ
table_dict = table.stack().to_dict()
plt.figure(figsize=(8, 6))
mosaic(table_dict, labelizer=labelizer, title='G_ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬ â†” í–‰ë³µì§€ìˆ˜')
plt.show()
```



:::

::: {.column width="40%"}

- ì¹´ì´ì œê³± í†µê³„ëŸ‰: 313.732
- p-value: 0.000
- ë…ë¦½ì„± ê²€ì •: ìƒê´€ì´ ìˆë‹¤ê³  ë§í•  í†µê³„ì  ê·¼ê±°ê°€ ì¶©ë¶„í•˜ë‹¤.
- ë™ì§ˆì„± ê²€ì •: í•˜ë‚˜ë¼ë„ ë¹„ìœ¨ì´ ë‹¤ë¥¸ ë²”ì£¼ê°€ ìˆë‹¤ê³  ë§í•  í†µê³„ì  ê·¼ê±°ê°€ ì¶©ë¶„í•˜ë‹¤.


:::

::::

---

## 3-2 Tukey ì‚¬í›„ê²€ì •
### í–‰ë³µì§€ìˆ˜ì™€ ê°€ì¡±ê³¼ì˜ ì‹ì‚¬

```{python}
#| code-fold: true
#| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
import matplotlib.pyplot as plt
dat23 = dat1[['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬','í–‰ë³µì§€ìˆ˜']]
dat23['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'] = dat23['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'].apply(group_5to3)
dat23 = dat23.dropna()
    
tukey = pairwise_tukeyhsd(
    endog=dat23['í–‰ë³µì§€ìˆ˜'],      
    groups=dat23['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'],  
    alpha=0.05            
)

from statsmodels.stats.multicomp import pairwise_tukeyhsd
from IPython.display import Markdown, display

# Tukey ìš”ì•½ ê²°ê³¼ë¥¼ markdownìœ¼ë¡œ í¬ê²Œ ì¶œë ¥
display(Markdown(f"<pre style='font-size: 1em'>{tukey.summary()}</pre>"))

```

- tukeyì‚¬í›„ê²€ì •: ëª¨ë“  ë³€ìˆ˜ ì¡°í•©ì´ ì°¨ì´ê°€ ìˆë‹¤ê³  ë§í•  í†µê³„ì  ê·¼ê±°ê°€ ì¶©ë¶„í•˜ë‹¤.
- ê°€ì¡±ê³¼ ë³´ë‚´ëŠ” ì‹œê°„ì´ ë§ì„ìˆ˜ë¡ í–‰ë³µí•˜ë‹¤!


---


## 3-2 ë³€ìˆ˜ ë³„ ë¶„ì„â‘¡_í–‰ë³µì§€ìˆ˜ì™€ ì›”í‰ê·  ê·¼ë¡œì†Œë“
### ëª¨ìì´í¬ ì‹œê°í™”, ì¹´ì´ì œê³± ê²€ì •

::::: columns

::: {.column width="60%"}
```{python}
#| code-fold: true
#| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
# ë¶€ì

dat3 = dat1[['ì›” í‰ê·  ê·¼ë¡œì†Œë“','í–‰ë³µì—¬ë¶€']]
dat3 = dat3.dropna()
def change2(x):
    if x<4:
        return 'í•˜'
    elif x<9:
        return 'ì¤‘'
    elif x<14:
        return 'ìƒ'
    else:
        return 'ìµœìƒ'
dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'] = dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'].apply(change2)

order1 = ['í•˜', 'ì¤‘', 'ìƒ','ìµœìƒ']
dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'] = pd.Categorical(dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'], categories=order1, ordered=True)
table = pd.crosstab(dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'], dat3['í–‰ë³µì—¬ë¶€'])
visual_table2 = table
table_dict = table.stack().to_dict()

plt.figure(figsize=(8, 6))
mosaic(table_dict, labelizer=labelizer, title='ì›” í‰ê·  ê·¼ë¡œì†Œë“ê³¼ í–‰ë³µì§€ìˆ˜ ì—¬ë¶€')
plt.show()

```


:::

::: {.column width="40%"}

- ì¹´ì´ì œê³± í†µê³„ëŸ‰: 35.665
- p-value: 0.000
- ë…ë¦½ì„± ê²€ì •: ìƒê´€ì´ ìˆë‹¤ê³  ë§í•  í†µê³„ì  ê·¼ê±°ê°€ ì¶©ë¶„í•˜ë‹¤.
- ë™ì§ˆì„± ê²€ì •: í•˜ë‚˜ë¼ë„ ë¹„ìœ¨ì´ ë‹¤ë¥¸ ë²”ì£¼ê°€ ìˆë‹¤ê³  ë§í•  í†µê³„ì  ê·¼ê±°ê°€ ì¶©ë¶„í•˜ë‹¤.


:::

:::::


## 3-2 Tukey ì‚¬í›„ê²€ì •  
### í–‰ë³µì§€ìˆ˜ì™€ ì›”í‰ê·  ê·¼ë¡œì†Œë“

```{python}
#| code-fold: true
#| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
dat3 = dat1[['ì›” í‰ê·  ê·¼ë¡œì†Œë“','í–‰ë³µì§€ìˆ˜']]
dat3 = dat3.dropna()
    
dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'] = dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'].apply(change2)

tukey = pairwise_tukeyhsd(
    endog=dat3['í–‰ë³µì§€ìˆ˜'],
    groups=dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'],
    alpha=0.05
)

# Tukey ìš”ì•½ ê²°ê³¼ë¥¼ markdownìœ¼ë¡œ í¬ê²Œ ì¶œë ¥
display(Markdown(f"<pre style='font-size: 0.8em'>{tukey.summary()}</pre>"))

```

- tukeyì‚¬í›„ê²€ì •: ì¼ë¶€ ë³€ìˆ˜ ì¡°í•©ë§Œ ë¹„ìœ¨ ì°¨ì´ê°€ ìˆë‹¤.
- ê·¼ë¡œ ì†Œë“ê³¼ í–‰ë³µì§€ìˆ˜ê°€ ë¹„ìœ¨ ì°¨ì´ë¥¼ ê°€ì§„ë‹¤ê³  ë³¼ ìˆ˜ ì—†ë‹¤.

---
## 3-3 ì „ì²´ ë°ì´í„° ê²€ì •

::::: columns

::: {.column width="50%"}
![](./pyo.png)
:::




::: {.column width="40%"}

### ì˜ˆìƒê³¼ ë‹¤ë¥¸ ë³€ìˆ˜
- ì†Œë“ë³„
- ìŠ¤íŠ¸ë ˆìŠ¤ ìˆ˜ì¤€ ë¶„ì„
- ê¸°ë¶€ì—¬ë¶€
- ì •ì¹˜ì„±í–¥ë³„
- ì¤€ë²•ì—¬ë¶€
- ì¼ê³¼ ì—¬ê°€ ê· í˜• ìˆ˜ì¤€
- ì²´ìœ¡í™œë™ ì°¸ì—¬ë¹ˆë„
- ì£¼ê±°í˜•íƒœë³„
- ì§€ì—­ì‚¬íšŒ ì†Œì†ê°
- ë¬¸í™”í™˜ê²½ ë§Œì¡±ë„


:::

:::::


## 3-4 ëª¨ë¹„ìœ¨ ì‹ ë¢°êµ¬ê°„ ì¶”ì •
### í–‰ë³µì§€ìˆ˜ì™€ ê°€ì¡±ê³¼ì˜ ì‹ì‚¬
::::: columns

::: {.column width="60%"}
```{python}
#| code-fold: true
#| #| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
dat23 = dat1[['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬','í–‰ë³µì§€ìˆ˜']]
dat23['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'] = dat23['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'].apply(group_5to3)
dat23 = dat23.dropna()
    
tukey = pairwise_tukeyhsd(
    endog=dat23['í–‰ë³µì§€ìˆ˜'],      
    groups=dat23['ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'],  
    alpha=0.05            
)
# ëª¨ë¹„ìœ¨ ì¶”ì • ì‹œê°í™”
visual_table1=visual_table1.reset_index()
# ë°ì´í„° ì •ì˜
data = pd.DataFrame({
    'Group': visual_table1['G_ê°€ì¡±ê³¼ í•¨ê»˜ ë³´ë‚´ëŠ” ì‹œê°„_ê°€ì¡±ê³¼ì˜ ì‹ì‚¬'],
    'í–‰ë³µ': visual_table1['í–‰ë³µ'],
    'ì „ì²´': visual_table1['ë¶ˆí–‰']+visual_table1['í–‰ë³µ']
})

visual_code(data)

```



:::

::: {.column width="40%"}

- ëª¨ë¹„ìœ¨ ì‹ ë¢°êµ¬ê°„ ì¶”ì •
- ì‹ ë¢°êµ¬ê°„ì„ í†µí•´ ê·¸ë£¹ê°„ ëª¨ë¹„ìœ¨ ì°¨ì´ê°€ ìˆìŒì„ ìµœì¢…ì ìœ¼ë¡œ í™•ì¸


:::

:::::



## 3-4 ëª¨ë¹„ìœ¨ ì‹ ë¢°êµ¬ê°„ ì¶”ì •
### í–‰ë³µì§€ìˆ˜ì™€ ì›”í‰ê·  ê·¼ë¡œì†Œë“

::::: columns

::: {.column width="60%"}
```{python}
#| code-fold: true
#| #| code-summary: "í´ë¦­í•´ì„œ ì½”ë“œ ë³´ê¸°"
dat3 = dat1[['ì›” í‰ê·  ê·¼ë¡œì†Œë“','í–‰ë³µì§€ìˆ˜']]
dat3 = dat3.dropna()
    
dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'] = dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'].apply(change2)

tukey = pairwise_tukeyhsd(
    endog=dat3['í–‰ë³µì§€ìˆ˜'],
    groups=dat3['ì›” í‰ê·  ê·¼ë¡œì†Œë“'],
    alpha=0.05
)


# ëª¨ë¹„ìœ¨ ì‹œê°í™”
visual_table2=visual_table2.reset_index()

data = pd.DataFrame({
    'Group': visual_table2['ì›” í‰ê·  ê·¼ë¡œì†Œë“'],
    'í–‰ë³µ': visual_table2['í–‰ë³µ'],
    'ì „ì²´': visual_table2['ë¶ˆí–‰']+visual_table2['í–‰ë³µ']
})

visual_code(data)

```


:::

::: {.column width="40%"}

- ëª¨ë¹„ìœ¨ ì‹ ë¢°êµ¬ê°„ ì¶”ì •
- ì‹ ë¢°êµ¬ê°„ì„ í†µí•´ ê·¸ë£¹ê°„ ëª¨ë¹„ìœ¨ ì°¨ì´ê°€ ìˆë‹¤ê³  í™•ì‹ í•  ìˆ˜ ì—†ìŒ


:::

:::::

:::::

## ì–´ë ¤ì› ë˜ ì 
<div style="text-align: center; font-size: 3em; font-weight: bold; margin: 2em 0;">
  ë²”ì£¼í˜• ë°ì´í„° íŠ¹ì„±ì— ë”°ë¥¸ ìƒê´€ê³„ìˆ˜ íŒŒì•… ë¶ˆê°€ëŠ¥
  
  </br>

  í–‰ë³µì— ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ì§€í‘œ ì„ ì •ì˜ ì–´ë ¤ì›€
  
</div>

## ê²°ë¡ 

<h1 style="text-align: center; font-size: 3em; font-weight: bold; margin: 2em 0;">
  ì§„ì§œ í–‰ë³µì€ ë­˜ê¹Œìš©?
</h1>






# Thank you!
